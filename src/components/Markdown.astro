---
import { marked } from 'marked';

const { url } = Astro.props;
console.log(`https://raw.githubusercontent.com/nf-core/${url}`);
const response = await fetch(`https://raw.githubusercontent.com/nf-core/${url}`);
var markdown = await response.text();
// remove all content before the first header
markdown = markdown.substring(markdown.indexOf('# Introduction'));
var content = marked.parse(markdown);
// replace "docs/images" with the correct github url
content = content.replace(
    /docs\/images/g,
    `https://raw.githubusercontent.com/nf-core/${Astro.props.name}/master/docs/images`
);
---

<div class="container" set:html={content} />
